<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>How to Migrate 3 MySQL Databases to Amazon RDS in 5 Minutes | OpCode Tech</title>
<meta name="generator" content="Jekyll v4.3.1" />
<meta property="og:title" content="How to Migrate 3 MySQL Databases to Amazon RDS in 5 Minutes" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I had a LAMT (Linux-Apache-MySQL-Tomcat) on Amazon EC2 and I wanted to move all remaining MySQL databases (3) to an existing Amazon RDS instance. This would allow me to shutdown the MySQL instance on EC2, freeing RAM for Tomcat and leveraging RDS automated backups for those 3 databases in case of a disaster. The databases to migrate only contain low volume TEST data, but I already have that RDS instance, so why not use it?" />
<meta property="og:description" content="I had a LAMT (Linux-Apache-MySQL-Tomcat) on Amazon EC2 and I wanted to move all remaining MySQL databases (3) to an existing Amazon RDS instance. This would allow me to shutdown the MySQL instance on EC2, freeing RAM for Tomcat and leveraging RDS automated backups for those 3 databases in case of a disaster. The databases to migrate only contain low volume TEST data, but I already have that RDS instance, so why not use it?" />
<link rel="canonical" href="https://opcodesolutions.com/tech/how-to-migrate-3-mysql-databases-to-amazon-rds-in-5-minutes/" />
<meta property="og:url" content="https://opcodesolutions.com/tech/how-to-migrate-3-mysql-databases-to-amazon-rds-in-5-minutes/" />
<meta property="og:site_name" content="OpCode Tech" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-12-23T00:00:00-05:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="How to Migrate 3 MySQL Databases to Amazon RDS in 5 Minutes" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2014-12-23T00:00:00-05:00","datePublished":"2014-12-23T00:00:00-05:00","description":"I had a LAMT (Linux-Apache-MySQL-Tomcat) on Amazon EC2 and I wanted to move all remaining MySQL databases (3) to an existing Amazon RDS instance. This would allow me to shutdown the MySQL instance on EC2, freeing RAM for Tomcat and leveraging RDS automated backups for those 3 databases in case of a disaster. The databases to migrate only contain low volume TEST data, but I already have that RDS instance, so why not use it?","headline":"How to Migrate 3 MySQL Databases to Amazon RDS in 5 Minutes","mainEntityOfPage":{"@type":"WebPage","@id":"https://opcodesolutions.com/tech/how-to-migrate-3-mysql-databases-to-amazon-rds-in-5-minutes/"},"url":"https://opcodesolutions.com/tech/how-to-migrate-3-mysql-databases-to-amazon-rds-in-5-minutes/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/tech/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://opcodesolutions.com/tech/feed.xml" title="OpCode Tech" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/tech/">OpCode Tech</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/tech/contact/">Contact</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">How to Migrate 3 MySQL Databases to Amazon RDS in 5 Minutes</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2014-12-23T00:00:00-05:00" itemprop="datePublished">Dec 23, 2014
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>I had a LAMT (Linux-Apache-MySQL-Tomcat) on <a href="https://aws.amazon.com/ec2/">Amazon EC2</a> and I wanted to move all remaining MySQL databases (3) to an existing <a href="https://aws.amazon.com/rds/">Amazon RDS</a> instance. This would allow me to shutdown the MySQL instance on EC2, freeing RAM for Tomcat and leveraging RDS automated backups for those 3 databases in case of a disaster. The databases to migrate only contain low volume TEST data, but I already have that RDS instance, so why not use it?</p>

<p>I also have a SLA with my clients that allows me to perform <em>“Standard daily maintenance”</em>. Basically, the <em>“Standard daily maintenance”</em> must be performed outside business hours and must last <strong>at most 15 minutes</strong>.</p>

<p>The key to the success of this migration was to <strong>prepare</strong>, <strong>prepare</strong> and <strong>prepare</strong> before the actual migration. So here is what I did before the migration:</p>

<ul>
  <li>Create 3 empty databases and users on the RDS instance</li>
  <li>Prepare new configuration files with the new JDBC url pointing to the RDS instance</li>
  <li>Prepare all the commands that must be executed</li>
  <li>Review and test the commands as needed</li>
</ul>

<p>Now that I am prepared I just need to wait for the <em>“Standard daily maintenance”</em> time. Then, I just copy and paste the commands in a terminal. I prefer to copy/paste the commands one by one, so if any command fails (for any reason), it can be fixed right away before running the next commands. Here is a summary of the commands:</p>

<ol>
  <li>Shutdown Tomcat</li>
  <li><a href="https://www.thegeekstuff.com/2008/09/backup-and-restore-mysql-database-using-mysqldump/">MySQL dump/restore</a> from EC2 to RDS (3 databases)</li>
  <li>Copy the configuration files with JDBC url pointing to RDS (3 files)</li>
  <li><a href="https://askubuntu.com/questions/40072/how-to-stop-apache2-mysql-from-starting-automatically-as-computer-starts">Prevent MySQL from starting during boot</a>: echo manual &gt; /etc/init/mysql.override</li>
  <li>sudo reboot (I want to verify that MySQL on EC2 won’t start after a reboot)</li>
</ol>

<p>Everything went fine. After reboot, the MySQL instance on EC2 was not started, as expected. The Tomcat webapps were fine as well and there is more free RAM for Tomcat.</p>

<p>For those webapps, I have <a href="https://www.pingdom.com/">uptime monitoring at one minute interval with Pingdom</a>. I receive emails when a webapp go down and up again. Here is the “UP” email from Pingdom, showing <strong>5 minutes of downtime</strong> for that migration:</p>

<p><em>OpCode is UP again at 12/22/2014 08:25:36PM, after <strong>5m of downtime</strong>.</em></p>

<p><em>Author: <a href="https://www.linkedin.com/in/jonathan-demers-ing" title="Jonathan Demers">Jonathan Demers</a></em></p>

  </div><a class="u-url" href="/tech/how-to-migrate-3-mysql-databases-to-amazon-rds-in-5-minutes/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/tech/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">OpCode Tech</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">OpCode Tech</li><li><a class="u-email" href="mailto:jdemers@opcodesolutions.com">jdemers@opcodesolutions.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/JonDemers"><svg class="svg-icon"><use xlink:href="/tech/assets/minima-social-icons.svg#github"></use></svg> <span class="username">JonDemers</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Optimize Your Processes</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
