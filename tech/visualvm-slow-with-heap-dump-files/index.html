<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>VisualVM slow with heap dump files | OpCode Tech</title>
<meta name="generator" content="Jekyll v4.3.1" />
<meta property="og:title" content="VisualVM slow with heap dump files" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="One great feature of VisualVM is that it can read heap dump files. Heap dumps are useful to diagnose memory leaks. See this post for more details about memory leaks and how to solve them." />
<meta property="og:description" content="One great feature of VisualVM is that it can read heap dump files. Heap dumps are useful to diagnose memory leaks. See this post for more details about memory leaks and how to solve them." />
<link rel="canonical" href="https://opcodesolutions.com/tech/visualvm-slow-with-heap-dump-files/" />
<meta property="og:url" content="https://opcodesolutions.com/tech/visualvm-slow-with-heap-dump-files/" />
<meta property="og:site_name" content="OpCode Tech" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2010-06-12T00:00:00-04:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="VisualVM slow with heap dump files" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2010-06-12T00:00:00-04:00","datePublished":"2010-06-12T00:00:00-04:00","description":"One great feature of VisualVM is that it can read heap dump files. Heap dumps are useful to diagnose memory leaks. See this post for more details about memory leaks and how to solve them.","headline":"VisualVM slow with heap dump files","mainEntityOfPage":{"@type":"WebPage","@id":"https://opcodesolutions.com/tech/visualvm-slow-with-heap-dump-files/"},"url":"https://opcodesolutions.com/tech/visualvm-slow-with-heap-dump-files/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://opcodesolutions.com/feed.xml" title="OpCode Tech" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">OpCode Tech</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/tech/contact/">Contact</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">VisualVM slow with heap dump files</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2010-06-12T00:00:00-04:00" itemprop="datePublished">Jun 12, 2010
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>One great feature of <a href="https://visualvm.dev.java.net/">VisualVM</a> is that it can read heap dump files. Heap dumps are useful to diagnose memory leaks. See this post for more details about <a href="/tech/solve-java-lang-outofmemoryerror-java-heap-space/">memory leaks and how to solve them</a>.</p>

<h2 id="why-visualvm-is-slow-with-heap-dump">Why VisualVM is slow with heap dump</h2>

<p>Another great feature of VisualVM is that you can read a huge heap dump file and VisualVm will consume a minimal amount of memory to do so. For instance, you will be able to read a 8 Gigabytes heap dump file with VisualVM running on a development workstation having only 2 Gigabytes of RAM. In order to achieve that, VisualVM will parse the heap dump file and will create a work file on disk in the default system temp folder (/tmp by default on Linux). In theory that’s great, but in practice, VisualVM becomes painfully slow because it constantly have to do disk I/O’s to process the information.</p>

<p>This behavior is even more frustrating if you happen to have a server with 12 Gigabytes of RAM available for you. A simple solution for that is to create a ramdisk and tell VisualVM to use that ramdisk as the tmp folder.</p>

<h2 id="the-solution-use-a-ramdisk">The solution: use a RAMDisk</h2>

<p>First, create the RAMDisk (tmpfs). Here I am on a linux development server and I create a tmp folder in my home. Then I create (mount) the ramdisk in the tmp folder I just created:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mkdir</span> /tmp/ramdisk
<span class="nv">$ </span><span class="nb">sudo </span>mount <span class="nt">-t</span> tmpfs none /tmp/ramdisk
</code></pre></div></div>

<p>Then I launch VisualVM and I modify the java.io.tmpdir VM arg that tells VisualVM where the system tmp folder is.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>jvisualvm <span class="nt">-J-Djava</span>.io.tmpdir<span class="o">=</span>/tmp/ramdisk
</code></pre></div></div>

<p>Now VisualVM is much much faster and I can investigate and find the root cause of that memory leak much faster.</p>

<p><em>Author: <a href="https://www.linkedin.com/in/jonathan-demers-ing" title="Jonathan Demers">Jonathan Demers</a></em></p>

  </div><a class="u-url" href="/tech/visualvm-slow-with-heap-dump-files/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">OpCode Tech</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">OpCode Tech</li><li><a class="u-email" href="mailto:jdemers@opcodesolutions.com">jdemers@opcodesolutions.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/JonDemers"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">JonDemers</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Optimize Your Processes</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
